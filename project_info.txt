# Project Informatie: aiontwikkelhulp

## Projectoverzicht
De AI Ontwikkelhulp (aiontwikkelhulp) is een tool die de communicatie tussen gebruikers en AI-modellen (specifiek Claude) faciliteert om code-ontwikkeling en repository-beheer te ondersteunen. De tool biedt een gestructureerde manier om AI-gestuurde ontwikkeling uit te voeren volgens een vooraf gedefinieerde werkwijze.

## Architectuur
De aiontwikkelhulp bestaat uit verschillende modules die samenwerken om gebruikers te helpen bij het ontwikkelen van software met behulp van AI:

### Core Modules:
- Flask web-applicatie (app.py)
- Anthropic API integratie (anthropic_api.py)
- MCP Connector voor tools integratie (mcp_connector.py)
- Configuratie (config.py)
- Repository beheer

### Nieuwe Modules (Refactoring):
- Anthropic configuratie (anthropic_config.py)
- Anthropic client (anthropic_client.py)
- Conversation manager (conversation_manager.py)
- MCP integratie (mcp_integration.py)

## Modules

### anthropic_api.py
- **Status**: Gerefactored
- **Pad**: /anthropic_api.py
- **Functionaliteit**: High-level API voor interactie met Anthropic Claude modellen. Co√∂rdineert tussen client, conversation management, en MCP integratie. Ondersteunt conditionele inclusie van project_info in cache.
- **Afhankelijkheden**: anthropic_config.py, anthropic_client.py, conversation_manager.py, mcp_integration.py, repositories

### anthropic_config.py
- **Status**: Actief (bijgewerkt)
- **Pad**: /anthropic_config.py
- **Functionaliteit**: Centralized Anthropic-specifieke configuratie met lazy loading en validatie. Ondersteunt nu ook lazy loading van project_info.txt.
- **Afhankelijkheden**: Geen directe afhankelijkheden

### anthropic_client.py
- **Status**: Actief (bijgewerkt)
- **Pad**: /anthropic_client.py
- **Functionaliteit**: Pure API communicatie met Claude modellen. Ondersteunt ephemeral caching van zowel system prompt als project_info.
- **Afhankelijkheden**: anthropic_config.py

### conversation_manager.py
- **Status**: Nieuw toegevoegd
- **Pad**: /conversation_manager.py
- **Functionaliteit**: Beheert conversatie staat en geschiedenis, ondersteunt storage backends.
- **Afhankelijkheden**: repositories (optioneel voor database storage)

### mcp_integration.py
- **Status**: Nieuw toegevoegd
- **Pad**: /mcp_integration.py
- **Functionaliteit**: Beheert MCP server connecties en tool gebruik.
- **Afhankelijkheden**: mcp_connector.py, anthropic_config.py

### config.py
- **Status**: Gerefactored
- **Pad**: /config.py
- **Functionaliteit**: Verzorgt de algemene applicatie configuratie. Anthropic-specifieke config is verplaatst naar anthropic_config.py.
- **Afhankelijkheden**: anthropic_config.py

### mcp_connector.py
- **Status**: Actief
- **Pad**: /mcp_connector.py
- **Functionaliteit**: Zorgt voor communicatie met externe tools die AI kan gebruiken.
- **Afhankelijkheden**: Geen directe afhankelijkheden binnen het project

### app.py
- **Status**: Actief
- **Pad**: /app.py
- **Functionaliteit**: Flask web-applicatie die de gebruikersinterface biedt.
- **Afhankelijkheden**: anthropic_api.py, config.py

### werkwijze/werkwijze.txt
- **Status**: Actief
- **Pad**: /werkwijze/werkwijze.txt
- **Functionaliteit**: Bevat instructies voor het AI-model over hoe repository-ontwikkeling moet verlopen.
- **Afhankelijkheden**: Wordt gebruikt door anthropic_config.py (lazy loaded)

### system_prompt.txt
- **Status**: Actief
- **Pad**: /system_prompt.txt
- **Functionaliteit**: Bevat de basis system prompt voor het AI-model.
- **Afhankelijkheden**: Wordt gebruikt door anthropic_config.py (lazy loaded)

### project_info.txt
- **Status**: Actief
- **Pad**: /project_info.txt
- **Functionaliteit**: Bevat projectinformatie die wordt gecached voor betere performance bij ontwikkel-gerelateerde vragen.
- **Afhankelijkheden**: Wordt gebruikt door anthropic_config.py (lazy loaded)

### tests/test_anthropic_config.py
- **Status**: Actief (bijgewerkt)
- **Pad**: /tests/test_anthropic_config.py
- **Functionaliteit**: Unit tests voor AnthropicConfig module, inclusief tests voor project_info caching.
- **Afhankelijkheden**: anthropic_config.py

### tests/test_anthropic_client.py
- **Status**: Nieuw toegevoegd
- **Pad**: /tests/test_anthropic_client.py
- **Functionaliteit**: Unit tests voor AnthropicClient module, inclusief tests voor project_info caching.
- **Afhankelijkheden**: anthropic_client.py, anthropic_config.py

### tests/test_conversation_manager.py
- **Status**: Nieuw toegevoegd
- **Pad**: /tests/test_conversation_manager.py
- **Functionaliteit**: Unit tests voor ConversationManager module.
- **Afhankelijkheden**: conversation_manager.py

## Recente Wijzigingen

### Implementatie van project_info.txt caching (Issue #35)
- **Configuratie uitbreiding**: Toevoeging van lazy loading voor project_info.txt in AnthropicConfig
- **Cache ondersteuning**: AnthropicClient ondersteunt nu ephemeral caching van project_info naast system prompt
- **Conditionele inclusie**: AnthropicAPI bepaalt automatisch wanneer project_info moet worden meegestuurd op basis van de prompt inhoud
- **Performance verbetering**: Verminderde API latency voor ontwikkel-gerelateerde vragen door project informatie te cachen
- **Testing**: Uitgebreide unit tests voor nieuwe caching functionaliteit

### Refactoring van config.py en anthropic_api.py (Issue #30)
- **Configuratie Management**: Implementatie van lazy loading voor configuratiebestanden, centralisatie van Anthropic configuratie in aparte module
- **Code Duplicatie**: Verwijdering van dubbele configuratie logic, consolidatie van API key validatie
- **Architectuur Verbetering**: Splitsing van AnthropicAPI in kleinere, gefocuste componenten met duidelijke verantwoordelijkheden
- **Backwards Compatibility**: Behoud van bestaande interfaces voor minimale impact op bestaande code
- **Testing**: Toevoeging van unit tests voor nieuwe modules