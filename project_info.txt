# Project Informatie: aiontwikkelhulp

## Projectoverzicht
De AI Ontwikkelhulp (aiontwikkelhulp) is een tool die de communicatie tussen gebruikers en AI-modellen (specifiek Claude) faciliteert om code-ontwikkeling en repository-beheer te ondersteunen. De tool biedt een gestructureerde manier om AI-gestuurde ontwikkeling uit te voeren volgens een vooraf gedefinieerde werkwijze.

## Architectuur
De aiontwikkelhulp bestaat uit verschillende modules die samenwerken om gebruikers te helpen bij het ontwikkelen van software met behulp van AI:

### Core Modules:
- Flask web-applicatie (app.py)
- Anthropic API integratie (anthropic_api.py)
- MCP Connector voor tools integratie (mcp_connector.py)
- Configuratie (config.py)
- Repository beheer

## Modules

### anthropic_api.py
- **Status**: Actief, onderhouden
- **Pad**: /anthropic_api.py
- **Functionaliteit**: Zorgt voor de integratie met de Anthropic Claude API. Handelt prompts, conversaties en tooling af.
- **Afhankelijkheden**: config.py, mcp_connector.py, repositories

### config.py
- **Status**: Actief, onderhouden
- **Pad**: /config.py
- **Functionaliteit**: Verzorgt de configuratie van de applicatie, inclusief API sleutels, model parameters en system prompts.
- **Afhankelijkheden**: Geen directe afhankelijkheden

### mcp_connector.py
- **Status**: Actief
- **Pad**: /mcp_connector.py
- **Functionaliteit**: Zorgt voor communicatie met externe tools die AI kan gebruiken.
- **Afhankelijkheden**: Geen directe afhankelijkheden binnen het project

### app.py
- **Status**: Actief
- **Pad**: /app.py
- **Functionaliteit**: Flask web-applicatie die de gebruikersinterface biedt.
- **Afhankelijkheden**: anthropic_api.py, config.py

### werkwijze/werkwijze.txt
- **Status**: Actief
- **Pad**: /werkwijze/werkwijze.txt
- **Functionaliteit**: Bevat instructies voor het AI-model over hoe repository-ontwikkeling moet verlopen.
- **Afhankelijkheden**: Wordt gebruikt door anthropic_api.py

### system_prompt.txt
- **Status**: Actief
- **Pad**: /system_prompt.txt
- **Functionaliteit**: Bevat de basis system prompt voor het AI-model.
- **Afhankelijkheden**: Wordt gebruikt door anthropic_api.py

## Recente Wijzigingen

### Verwijderen van get_werkwijze tool
- De `get_werkwijze` tool is verwijderd uit `anthropic_api.py` omdat deze overbodig was naast de automatische integratie van de werkwijze in de system prompt.
- De werkwijze wordt nog steeds automatisch in de system prompt opgenomen via de `send_prompt` functie.

### Fix: System prompt wordt correct in LLM cache geladen
- De `_apply_cache_control` functie in `anthropic_api.py` is verbeterd om caching correct toe te passen op de Anthropic API aanroepen.
- Cache controle wordt nu direct op message_params toegepast in plaats van op individuele berichten.
- Het cache_ttl wordt nu correct doorgegeven aan de API om de system prompt in de cache te laden.